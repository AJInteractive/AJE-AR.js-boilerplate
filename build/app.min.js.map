{"version":3,"sources":["webpack:///webpack/bootstrap 1a3519c5d7bdaac6d470","webpack:///./src/app.js"],"names":["renderer","THREE","WebGLRenderer","antialias","alpha","setClearColor","Color","setSize","domElement","style","position","top","left","document","body","appendChild","onRenderFcts","scene","Scene","camera","Camera","add","arToolkitSource","THREEx","ArToolkitSource","sourceType","init","onReady","onResize","takeScreenshot","w","window","open","title","img","Image","secondImg","render","doubleImageCanvas","getElementById","context","getContext","sources","firstImage","toDataURL","secondImage","arToolkitContext","arController","canvas","loadImages","images","drawImage","src","callback","loadedImages","numImages","onload","addEventListener","copySizeTo","ArToolkitContext","cameraParametersUrl","detectionMode","onCompleted","projectionMatrix","copy","getProjectionMatrix","push","ready","update","visible","markerControls","ArMarkerControls","type","patternUrl","changeMatrixMode","imgTexture","ImageUtils","loadTexture","imgMaterial","MeshBasicMaterial","map","transparent","opacity","geometry","PlaneGeometry","mesh","Mesh","y","x","rotation","Math","PI","lastTimeMsec","requestAnimationFrame","animate","nowMsec","deltaMsec","min","forEach","onRenderFct"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;AC7DA;AACA;AACA;;AAEA;AACA,IAAIA,WAAW,IAAIC,MAAMC,aAAV,CAAwB;AACrCC,aAAW,IAD0B;AAErCC,SAAO;AAF8B,CAAxB,CAAf;;AAKAJ,SAASK,aAAT,CAAuB,IAAIJ,MAAMK,KAAV,CAAgB,WAAhB,CAAvB,EAAqD,CAArD;AACAN,SAASO,OAAT,CAAiB,GAAjB,EAAsB,GAAtB;AACAP,SAASQ,UAAT,CAAoBC,KAApB,CAA0BC,QAA1B,GAAqC,UAArC;AACAV,SAASQ,UAAT,CAAoBC,KAApB,CAA0BE,GAA1B,GAAgC,KAAhC;AACAX,SAASQ,UAAT,CAAoBC,KAApB,CAA0BG,IAA1B,GAAiC,KAAjC;AACAC,SAASC,IAAT,CAAcC,WAAd,CAA0Bf,SAASQ,UAAnC;;AAEA;AACA,IAAIQ,eAAe,EAAnB;;AAEA;AACA,IAAIC,QAAQ,IAAIhB,MAAMiB,KAAV,EAAZ;;AAEA;AACA;AACA;;AAEA;AACA,IAAIC,SAAS,IAAIlB,MAAMmB,MAAV,EAAb;AACAH,MAAMI,GAAN,CAAUF,MAAV;;AAEA;AACA;AACA;;AAEA,IAAIG,kBAAkB,IAAIC,OAAOC,eAAX,CAA2B;AAC/C;AACAC,cAAY;;AAEZ;AACA;AACA;;AAEA;AACA;AACA;AAV+C,CAA3B,CAAtB;;AAaAH,gBAAgBI,IAAhB,CAAqB,SAASC,OAAT,GAAmB;AACtCC;AACD,CAFD;;AAIA,SAASC,cAAT,GAA0B;AACxB,MAAIC,IAAIC,OAAOC,IAAP,CAAY,EAAZ,EAAgB,EAAhB,CAAR;AACAF,IAAEjB,QAAF,CAAWoB,KAAX,GAAmB,YAAnB;AACA,MAAIC,MAAM,IAAIC,KAAJ,EAAV;AACA,MAAIC,YAAY,IAAID,KAAJ,EAAhB;AACAnC,WAASqC,MAAT,CAAgBpB,KAAhB,EAAuBE,MAAvB;AACA,MAAImB,oBAAoBzB,SAAS0B,cAAT,CAAwB,aAAxB,CAAxB;AACA,MAAIC,UAAUF,kBAAkBG,UAAlB,CAA6B,IAA7B,CAAd;AACA,MAAIC,UAAU;AACZC,gBAAY3C,SAASQ,UAAT,CAAoBoC,SAApB,CAA8B,WAA9B,CADA;AAEZC,iBAAaC,iBAAiBC,YAAjB,CAA8BC,MAA9B,CAAqCJ,SAArC,CAA+C,WAA/C;AAFD,GAAd;AAIAK,aAAWP,OAAX,EAAoB,UAASQ,MAAT,EAAiB;AACnCV,YAAQW,SAAR,CAAkBD,OAAOL,WAAzB,EAAsC,CAAtC,EAAyC,CAAzC;AACAL,YAAQW,SAAR,CAAkBD,OAAOP,UAAzB,EAAqC,CAArC,EAAwC,CAAxC;AACAT,QAAIkB,GAAJ,GAAUd,kBAAkBM,SAAlB,CAA4B,WAA5B,CAAV;AACAV,QAAIzB,KAAJ,GAAY,aAAZ;AACAqB,MAAEjB,QAAF,CAAWC,IAAX,CAAgBC,WAAhB,CAA4BmB,GAA5B;AACD,GAND;AAOD;;AAED,SAASe,UAAT,CAAoBP,OAApB,EAA6BW,QAA7B,EAAuC;AACrC,MAAIH,SAAS,EAAb;AACA,MAAII,eAAe,CAAnB;AACA,MAAIC,YAAY,CAAhB;AACA;AACA,OAAK,IAAIH,GAAT,IAAgBV,OAAhB,EAAyB;AACvBa;AACD;AACD,OAAK,IAAIH,GAAT,IAAgBV,OAAhB,EAAyB;AACvBQ,WAAOE,GAAP,IAAc,IAAIjB,KAAJ,EAAd;AACAe,WAAOE,GAAP,EAAYI,MAAZ,GAAqB,YAAW;AAC9B,UAAI,EAAEF,YAAF,IAAkBC,SAAtB,EAAiC;AAC/BF,iBAASH,MAAT;AACD;AACF,KAJD;AAKAA,WAAOE,GAAP,EAAYA,GAAZ,GAAkBV,QAAQU,GAAR,CAAlB;AACD;AACF;;AAED;AACAvC,SAAS0B,cAAT,CAAwB,UAAxB,EAAoCkB,gBAApC,CAAqD,OAArD,EAA8D,YAAW;AACvE5B;AACD,CAFD;;AAIA;AACAE,OAAO0B,gBAAP,CAAwB,QAAxB,EAAkC,YAAW;AAC3C7B;AACD,CAFD;AAGA,SAASA,QAAT,GAAoB;AAClBN,kBAAgBM,QAAhB;AACAN,kBAAgBoC,UAAhB,CAA2B1D,SAASQ,UAApC;AACA,MAAIsC,iBAAiBC,YAAjB,KAAkC,IAAtC,EAA4C;AAC1CzB,oBAAgBoC,UAAhB,CAA2BZ,iBAAiBC,YAAjB,CAA8BC,MAAzD;AACD;AACF;AACD;AACA;AACA;;AAEA;AACA,IAAIF,mBAAmB,IAAIvB,OAAOoC,gBAAX,CAA4B;AACjDC,uBAAqB,wBAD4B;AAEjDC,iBAAe;AAFkC,CAA5B,CAAvB;AAIA;AACAf,iBAAiBpB,IAAjB,CAAsB,SAASoC,WAAT,GAAuB;AAC3C;AACA3C,SAAO4C,gBAAP,CAAwBC,IAAxB,CAA6BlB,iBAAiBmB,mBAAjB,EAA7B;AACD,CAHD;;AAKA;AACAjD,aAAakD,IAAb,CAAkB,YAAW;AAC3B,MAAI5C,gBAAgB6C,KAAhB,KAA0B,KAA9B,EAAqC;AACrCrB,mBAAiBsB,MAAjB,CAAwB9C,gBAAgBd,UAAxC;AACA;AACAS,QAAMoD,OAAN,GAAgBlD,OAAOkD,OAAvB;AACD,CALD;;AAOA;AACA;AACA;;AAEA;AACA,IAAIC,iBAAiB,IAAI/C,OAAOgD,gBAAX,CAA4BzB,gBAA5B,EAA8C3B,MAA9C,EAAsD;AACzEqD,QAAM,SADmE;AAEzEC,cAAY,qBAF6D;AAGzE;AACA;AACAC,oBAAkB;AALuD,CAAtD,CAArB;AAOA;AACAzD,MAAMoD,OAAN,GAAgB,KAAhB;;AAEA;AACA;AACA;;AAEA;AACA,IAAIM,aAAa1E,MAAM2E,UAAN,CAAiBC,WAAjB,CAA6B,oBAA7B,CAAjB;AACA,IAAIC,cAAc,IAAI7E,MAAM8E,iBAAV,CAA4B;AAC5CC,OAAKL,UADuC;AAE5CM,eAAa,IAF+B;AAG5CC,WAAS;AAHmC,CAA5B,CAAlB;;AAMA,IAAIC,WAAW,IAAIlF,MAAMmF,aAAV,CAAwB,CAAxB,EAA2B,CAA3B,CAAf;AACA,IAAIC,OAAO,IAAIpF,MAAMqF,IAAV,CAAeH,QAAf,EAAyBL,WAAzB,CAAX;AACAO,KAAK3E,QAAL,CAAc6E,CAAd,GAAkB,CAAlB;AACAF,KAAK3E,QAAL,CAAc8E,CAAd,GAAkB,CAAlB;AACAvE,MAAMI,GAAN,CAAUgE,IAAV;AACAA,KAAKI,QAAL,CAAcD,CAAd,GAAkB,MAAME,KAAKC,EAA7B;;AAEA;AACA;AACA;;AAEA;AACA3E,aAAakD,IAAb,CAAkB,YAAW;AAC3BlE,WAASqC,MAAT,CAAgBpB,KAAhB,EAAuBE,MAAvB;AACD,CAFD;;AAIA;AACA,IAAIyE,eAAe,IAAnB;AACAC,sBAAsB,SAASC,OAAT,CAAiBC,OAAjB,EAA0B;AAC9C;AACAF,wBAAsBC,OAAtB;AACA;AACAF,iBAAeA,gBAAgBG,UAAU,OAAO,EAAhD;AACA,MAAIC,YAAYN,KAAKO,GAAL,CAAS,GAAT,EAAcF,UAAUH,YAAxB,CAAhB;AACAA,iBAAeG,OAAf;AACA;AACA/E,eAAakF,OAAb,CAAqB,UAASC,WAAT,EAAsB;AACzCA,gBAAYH,YAAY,IAAxB,EAA8BD,UAAU,IAAxC;AACD,GAFD;AAGD,CAXD,E","file":"app.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1a3519c5d7bdaac6d470","//////////////////////////////////////////////////////////////////////////////////\n//\t\tInit\n//////////////////////////////////////////////////////////////////////////////////\n\n// init renderer\nvar renderer = new THREE.WebGLRenderer({\n  antialias: true,\n  alpha: true\n});\n\nrenderer.setClearColor(new THREE.Color(\"lightgrey\"), 0);\nrenderer.setSize(640, 480);\nrenderer.domElement.style.position = \"absolute\";\nrenderer.domElement.style.top = \"0px\";\nrenderer.domElement.style.left = \"0px\";\ndocument.body.appendChild(renderer.domElement);\n\n// array of functions for the rendering loop\nvar onRenderFcts = [];\n\n// init scene and camera\nvar scene = new THREE.Scene();\n\n//////////////////////////////////////////////////////////////////////////////////\n//\t\tInitialize a basic camera\n//////////////////////////////////////////////////////////////////////////////////\n\n// Create a camera\nvar camera = new THREE.Camera();\nscene.add(camera);\n\n////////////////////////////////////////////////////////////////////////////////\n//          handle arToolkitSource\n////////////////////////////////////////////////////////////////////////////////\n\nvar arToolkitSource = new THREEx.ArToolkitSource({\n  // to read from the webcam\n  sourceType: \"webcam\"\n\n  // to read from an image\n  // sourceType : 'image',\n  // sourceUrl : './images/old-aja.jpg',\n\n  // to read from a video\n  // sourceType : 'video',\n  // sourceUrl : '../data/videos/headtracking.mp4',\n});\n\narToolkitSource.init(function onReady() {\n  onResize();\n});\n\nfunction takeScreenshot() {\n  var w = window.open(\"\", \"\");\n  w.document.title = \"Screenshot\";\n  var img = new Image();\n  var secondImg = new Image();\n  renderer.render(scene, camera);\n  var doubleImageCanvas = document.getElementById(\"doubleImage\");\n  var context = doubleImageCanvas.getContext(\"2d\");\n  var sources = {\n    firstImage: renderer.domElement.toDataURL(\"image/png\"),\n    secondImage: arToolkitContext.arController.canvas.toDataURL(\"image/png\")\n  };\n  loadImages(sources, function(images) {\n    context.drawImage(images.secondImage, 0, 0);\n    context.drawImage(images.firstImage, 0, 0);\n    img.src = doubleImageCanvas.toDataURL(\"image/png\");\n    img.style = \"width:100%;\";\n    w.document.body.appendChild(img);\n  });\n}\n\nfunction loadImages(sources, callback) {\n  var images = {};\n  var loadedImages = 0;\n  var numImages = 0;\n  // get num of sources\n  for (var src in sources) {\n    numImages++;\n  }\n  for (var src in sources) {\n    images[src] = new Image();\n    images[src].onload = function() {\n      if (++loadedImages >= numImages) {\n        callback(images);\n      }\n    };\n    images[src].src = sources[src];\n  }\n}\n\n// on button click take screen shot\ndocument.getElementById(\"snapshot\").addEventListener(\"click\", function() {\n  takeScreenshot();\n});\n\n// handle resize\nwindow.addEventListener(\"resize\", function() {\n  onResize();\n});\nfunction onResize() {\n  arToolkitSource.onResize();\n  arToolkitSource.copySizeTo(renderer.domElement);\n  if (arToolkitContext.arController !== null) {\n    arToolkitSource.copySizeTo(arToolkitContext.arController.canvas);\n  }\n}\n////////////////////////////////////////////////////////////////////////////////\n//          initialize arToolkitContext\n////////////////////////////////////////////////////////////////////////////////\n\n// create atToolkitContext\nvar arToolkitContext = new THREEx.ArToolkitContext({\n  cameraParametersUrl: \"./data/camera_para.dat\",\n  detectionMode: \"mono\"\n});\n// initialize it\narToolkitContext.init(function onCompleted() {\n  // copy projection matrix to camera\n  camera.projectionMatrix.copy(arToolkitContext.getProjectionMatrix());\n});\n\n// update artoolkit on every frame\nonRenderFcts.push(function() {\n  if (arToolkitSource.ready === false) return;\n  arToolkitContext.update(arToolkitSource.domElement);\n  // update scene.visible if the marker is seen\n  scene.visible = camera.visible;\n});\n\n////////////////////////////////////////////////////////////////////////////////\n//          Create a ArMarkerControls\n////////////////////////////////////////////////////////////////////////////////\n\n// init controls for camera\nvar markerControls = new THREEx.ArMarkerControls(arToolkitContext, camera, {\n  type: \"pattern\",\n  patternUrl: \"./data/patt.jazeera\",\n  // patternUrl : './data/patt.kanji',\n  // as we controls the camera, set changeMatrixMode: 'cameraTransformMatrix'\n  changeMatrixMode: \"cameraTransformMatrix\"\n});\n// as we do changeMatrixMode: 'cameraTransformMatrix', start with invisible scene\nscene.visible = false;\n\n//////////////////////////////////////////////////////////////////////////////////\n//\t\tadd an object in the scene\n//////////////////////////////////////////////////////////////////////////////////\n\n// add a torus knot\nvar imgTexture = THREE.ImageUtils.loadTexture(\"images/old-aja.jpg\");\nvar imgMaterial = new THREE.MeshBasicMaterial({\n  map: imgTexture,\n  transparent: true,\n  opacity: 0.8\n});\n\nvar geometry = new THREE.PlaneGeometry(5, 5);\nvar mesh = new THREE.Mesh(geometry, imgMaterial);\nmesh.position.y = 0;\nmesh.position.x = 0;\nscene.add(mesh);\nmesh.rotation.x = 1.5 * Math.PI;\n\n//////////////////////////////////////////////////////////////////////////////////\n//\t\trender the whole thing on the page\n//////////////////////////////////////////////////////////////////////////////////\n\n// render the scene\nonRenderFcts.push(function() {\n  renderer.render(scene, camera);\n});\n\n// run the rendering loop\nvar lastTimeMsec = null;\nrequestAnimationFrame(function animate(nowMsec) {\n  // keep looping\n  requestAnimationFrame(animate);\n  // measure time\n  lastTimeMsec = lastTimeMsec || nowMsec - 1000 / 60;\n  var deltaMsec = Math.min(200, nowMsec - lastTimeMsec);\n  lastTimeMsec = nowMsec;\n  // call each update function\n  onRenderFcts.forEach(function(onRenderFct) {\n    onRenderFct(deltaMsec / 1000, nowMsec / 1000);\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.js"],"sourceRoot":""}