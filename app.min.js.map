{"version":3,"sources":["webpack:///webpack/bootstrap 2e6b499dff80fbe1f1f4","webpack:///./src/app.js"],"names":["renderer","THREE","WebGLRenderer","antialias","alpha","setClearColor","Color","setSize","domElement","style","position","top","left","document","body","appendChild","onRenderFcts","scene","Scene","camera","Camera","add","arToolkitSource","THREEx","ArToolkitSource","sourceType","init","onReady","onResize","takeScreenshot","w","window","open","title","img","Image","secondImg","render","doubleImageCanvas","getElementById","context","getContext","sources","firstImage","toDataURL","secondImage","arToolkitContext","arController","canvas","loadImages","images","drawImage","src","callback","loadedImages","numImages","onload","addEventListener","copySizeTo","ArToolkitContext","cameraParametersUrl","detectionMode","onCompleted","projectionMatrix","copy","getProjectionMatrix","push","ready","update","visible","markerControls","ArMarkerControls","type","patternUrl","changeMatrixMode","imgTexture","ImageUtils","loadTexture","imgMaterial","MeshBasicMaterial","map","transparent","opacity","geometry","PlaneGeometry","mesh","Mesh","y","x","rotation","Math","PI","lastTimeMsec","requestAnimationFrame","animate","nowMsec","deltaMsec","min","forEach","onRenderFct"],"mappings":"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","file":"app.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2e6b499dff80fbe1f1f4","//////////////////////////////////////////////////////////////////////////////////\n\t\t//\t\tInit\n\t\t//////////////////////////////////////////////////////////////////////////////////\n\n\t\t// init renderer\n\t\tvar renderer = new THREE.WebGLRenderer({\n\t\t\tantialias: true,\n\t\t\talpha: true\n\t\t});\n\t\t\n\t\trenderer.setClearColor(new THREE.Color('lightgrey'), 0)\n\t\trenderer.setSize(640, 480);\n\t\trenderer.domElement.style.position = 'absolute'\n\t\trenderer.domElement.style.top = '0px'\n\t\trenderer.domElement.style.left = '0px'\n\t\tdocument.body.appendChild(renderer.domElement);\n\n\t\t// array of functions for the rendering loop\n\t\tvar onRenderFcts = [];\n\n\t\t// init scene and camera\n\t\tvar scene = new THREE.Scene();\n\n\t\t//////////////////////////////////////////////////////////////////////////////////\n\t\t//\t\tInitialize a basic camera\n\t\t//////////////////////////////////////////////////////////////////////////////////\n\n\t\t// Create a camera\n\t\tvar camera = new THREE.Camera();\n\t\tscene.add(camera);\n\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t//          handle arToolkitSource\n\t\t////////////////////////////////////////////////////////////////////////////////\n\n\t\tvar arToolkitSource = new THREEx.ArToolkitSource({\n\t\t\t// to read from the webcam \n\t\t\tsourceType: 'webcam',\n\n\t\t\t// to read from an image\n\t\t\t// sourceType : 'image',\n\t\t\t// sourceUrl : './images/old-aja.jpg',\n\n\t\t\t// to read from a video\n\t\t\t// sourceType : 'video',\n\t\t\t// sourceUrl : '../data/videos/headtracking.mp4',\t\t\n\t\t})\n\n\t\tarToolkitSource.init(function onReady() {\n\t\t\tonResize()\n\t\t})\n\n\t\tfunction takeScreenshot() {\n\t\t\tvar w = window.open('', '');\n\t\t\tw.document.title = \"Screenshot\";\n\t\t\tvar img = new Image();\n\t\t\tvar secondImg = new Image();\n\t\t\trenderer.render(scene, camera);\n\t\t\tvar doubleImageCanvas = document.getElementById('doubleImage');\n\t\t\tvar context = doubleImageCanvas.getContext('2d');\n\t\t\tvar sources = {\n\t\t\t\tfirstImage: renderer.domElement.toDataURL(\"image/png\"),\n\t\t\t\tsecondImage: arToolkitContext.arController.canvas.toDataURL(\"image/png\")\n\t\t\t};\n\t\t\tloadImages(sources, function(images){\n\t\t\t\tcontext.drawImage(images.secondImage, 0, 0);\n\t\t\t\tcontext.drawImage(images.firstImage, 0, 0);\n\t\t\t\timg.src = doubleImageCanvas.toDataURL(\"image/png\");\n\t\t\t\timg.style='width:100%;'\n\t\t\t\tw.document.body.appendChild(img);\n\t\t\t});\n\t\t}\n\n\t\tfunction loadImages(sources, callback) {\n\t\t\tvar images = {};\n\t\t\tvar loadedImages = 0;\n\t\t\tvar numImages = 0;\n\t\t\t// get num of sources\n\t\t\tfor (var src in sources) {\n\t\t\t\tnumImages++;\n\t\t\t}\n\t\t\tfor (var src in sources) {\n\t\t\t\timages[src] = new Image();\n\t\t\t\timages[src].onload = function () {\n\t\t\t\t\tif (++loadedImages >= numImages) {\n\t\t\t\t\t\tcallback(images);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\timages[src].src = sources[src];\n\t\t\t}\n\t\t}\n\n\t\t// on button click take screen shot\n\t\tdocument.getElementById('snapshot').addEventListener('click', function () {\n\t\t\ttakeScreenshot();\n\t\t});\n\n\n\t\t// handle resize\n\t\twindow.addEventListener('resize', function () {\n\t\t\tonResize()\n\t\t})\n\t\tfunction onResize() {\n\t\t\tarToolkitSource.onResize()\n\t\t\tarToolkitSource.copySizeTo(renderer.domElement)\n\t\t\tif (arToolkitContext.arController !== null) {\n\t\t\t\tarToolkitSource.copySizeTo(arToolkitContext.arController.canvas)\n\t\t\t}\n\t\t}\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t//          initialize arToolkitContext\n\t\t////////////////////////////////////////////////////////////////////////////////\n\n\n\t\t// create atToolkitContext\n\t\tvar arToolkitContext = new THREEx.ArToolkitContext({\n\t\t\tcameraParametersUrl: './data/camera_para.dat',\n\t\t\tdetectionMode: 'mono',\n\t\t})\n\t\t// initialize it\n\t\tarToolkitContext.init(function onCompleted() {\n\t\t\t// copy projection matrix to camera\n\t\t\tcamera.projectionMatrix.copy(arToolkitContext.getProjectionMatrix());\n\n\t\t})\n\n\t\t// update artoolkit on every frame\n\t\tonRenderFcts.push(function () {\n\t\t\tif (arToolkitSource.ready === false) return\n\t\t\tarToolkitContext.update(arToolkitSource.domElement)\n\t\t\t// update scene.visible if the marker is seen\n\t\t\tscene.visible = camera.visible\n\t\t})\n\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t//          Create a ArMarkerControls\n\t\t////////////////////////////////////////////////////////////////////////////////\n\n\t\t// init controls for camera\n\t\tvar markerControls = new THREEx.ArMarkerControls(arToolkitContext, camera, {\n\t\t\ttype: 'pattern',\n\t\t\tpatternUrl: './data/patt.jazeera',\n\t\t\t// patternUrl : './data/patt.kanji',\n\t\t\t// as we controls the camera, set changeMatrixMode: 'cameraTransformMatrix'\n\t\t\tchangeMatrixMode: 'cameraTransformMatrix'\n\t\t})\n\t\t// as we do changeMatrixMode: 'cameraTransformMatrix', start with invisible scene\n\t\tscene.visible = false\n\n\t\t//////////////////////////////////////////////////////////////////////////////////\n\t\t//\t\tadd an object in the scene\n\t\t//////////////////////////////////////////////////////////////////////////////////\n\n\t\t// add a torus knot\t\n\t\tvar imgTexture = THREE.ImageUtils.loadTexture('images/old-aja.jpg');\n\t\tvar imgMaterial = new THREE.MeshBasicMaterial({\n\t\t\tmap: imgTexture,\n\t\t\ttransparent: true,\n\t\t\topacity: 0.8\n\t\t});\n\n\t\tvar geometry = new THREE.PlaneGeometry(5, 5);\n\t\tvar mesh = new THREE.Mesh(geometry, imgMaterial);\n\t\tmesh.position.y = 0;\n\t\tmesh.position.x = 0;\n\t\tscene.add(mesh);\n\t\tmesh.rotation.x = 1.5 * Math.PI\n\n\t\t//////////////////////////////////////////////////////////////////////////////////\n\t\t//\t\trender the whole thing on the page\n\t\t//////////////////////////////////////////////////////////////////////////////////\n\n\t\t// render the scene\n\t\tonRenderFcts.push(function () {\n\t\t\trenderer.render(scene, camera);\n\t\t})\n\n\t\t// run the rendering loop\n\t\tvar lastTimeMsec = null\n\t\trequestAnimationFrame(function animate(nowMsec) {\n\t\t\t// keep looping\n\t\t\trequestAnimationFrame(animate);\n\t\t\t// measure time\n\t\t\tlastTimeMsec = lastTimeMsec || nowMsec - 1000 / 60\n\t\t\tvar deltaMsec = Math.min(200, nowMsec - lastTimeMsec)\n\t\t\tlastTimeMsec = nowMsec\n\t\t\t// call each update function\n\t\t\tonRenderFcts.forEach(function (onRenderFct) {\n\t\t\t\tonRenderFct(deltaMsec / 1000, nowMsec / 1000)\n\t\t\t})\n\t\t})\n\n\n// WEBPACK FOOTER //\n// ./src/app.js"],"sourceRoot":""}